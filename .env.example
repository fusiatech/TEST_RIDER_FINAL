# NextAuth.js Configuration
# Generate a secret with: openssl rand -base64 32
NEXTAUTH_SECRET=your-secret-key-here

# The URL of your application (used for callbacks)
# For local dev launcher this defaults to http://127.0.0.1:4100
# For Docker: use the external URL where the app is accessible
NEXTAUTH_URL=http://127.0.0.1:4100

# Optional client URL overrides.
# By default, WebSocket uses same origin and preview uses window origin.
NEXT_PUBLIC_WS_URL=
NEXT_PUBLIC_PREVIEW_URL=http://127.0.0.1:4100

# GitHub OAuth
# Create at: https://github.com/settings/developers
GITHUB_ID=your-github-client-id
GITHUB_SECRET=your-github-client-secret

# Google OAuth
# Create at: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# Optional demo credentials for local development only.
# Credentials auth is enabled only when:
# - NODE_ENV is not production
# - ENABLE_DEMO_AUTH=true
ENABLE_DEMO_AUTH=false
DEMO_AUTH_EMAIL=
DEMO_AUTH_PASSWORD=
NEXT_PUBLIC_DEMO_AUTH_ENABLED=false

# ===========================================
# RBAC Configuration
# ===========================================

# Comma-separated list of email addresses that should be granted admin role
# Users not in this list will be assigned 'editor' role by default
ADMIN_EMAILS=admin@example.com

# ===========================================
# WebSocket Authentication (BE-012)
# ===========================================

# Enable WebSocket connection authentication
# When enabled, WebSocket connections require a valid NextAuth session token
# Set to 'false' to disable (recommended for local development only)
WS_AUTH_ENABLED=false

# ===========================================
# Backup Configuration
# ===========================================

# Directory to store backup files
BACKUP_DIR=./backups

# Path to the database file
DATA_FILE=./db.json

# Number of backup files to retain (older backups are automatically deleted)
BACKUP_KEEP_COUNT=7

# ===========================================
# Docker-specific Configuration
# ===========================================

# Port to expose (default: 3000)
# DOCKER_PORT=3000

# Data volume path (for docker-compose)
# SWARM_DATA_PATH=./data

# Enable debug logging in container
# DEBUG=swarm:*

# ===========================================
# OpenTelemetry Configuration
# ===========================================

# OTLP endpoint for trace export (Jaeger, Zipkin, or any OTLP-compatible backend)
# Default: http://localhost:4318/v1/traces
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318/v1/traces

# Service name for traces (default: swarm-ui)
OTEL_SERVICE_NAME=swarm-ui

# ===========================================
# Observability Configuration (GAP-010, GAP-011)
# ===========================================

# Tempo URL for trace queries (used by /api/traces endpoint)
# Default: http://localhost:3200
TEMPO_URL=http://localhost:3200

# Log directory for structured logs (collected by Promtail)
# Default: /var/log/swarm-ui
LOG_DIR=/var/log/swarm-ui

# Maximum log file size before rotation (in bytes)
# Default: 10485760 (10MB)
LOG_MAX_SIZE=10485760

# Maximum number of rotated log files to keep
# Default: 5
LOG_MAX_FILES=5

# Minimum log level (debug, info, warn, error)
# Default: debug
LOG_LEVEL=info

# ===========================================
# Grafana Configuration (for monitoring profile)
# ===========================================

# Grafana admin credentials
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin

# ===========================================
# Extension Signature Verification (EXT-002)
# ===========================================

# Require valid signatures for all extensions (recommended for production)
# Default: true in production, false in development
EXTENSION_REQUIRE_SIGNATURES=false

# Allow unsigned extensions in development mode
# Default: true in development, false in production
EXTENSION_ALLOW_UNSIGNED_DEV=true

# Comma-separated list of trusted public keys (PEM format, base64 encoded)
# Extensions must be signed by one of these keys to be loaded
# Generate a key pair with: node -e "const {generateKeyPair} = require('./server/extension-signature'); console.log(generateKeyPair())"
EXTENSION_TRUSTED_PUBLIC_KEYS=
